<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>CyanogenMod for Meizu MX4: FAQ #1 | write(2)</title><meta name=keywords content><meta name=description content="Status on bootloader lock circumvention As you&rsquo;ve already known, ordinary version of Meizu MX4 has its bootloader locked, thus only stock Flyme images are allowed to boot. Due to the implementation of MTK secure restricted boot, the device will be hard-bricked if the RSA signature verification failed. You can&rsquo;t even recharge the battery as the verification code runs very early, even earlier than initialization of peripherals. Flashing using SP Flash Tool wouldn&rsquo;t work either because the Boot ROM (BROM) is locked on the hardware level."><meta name=author content="WÁNG &#34;xen0n&#34; Xuěruì"><link rel=canonical href=https://blog.xen0n.name/en/posts/old/meizu-mx4-cm/faq/><link crossorigin=anonymous href=/assets/css/stylesheet.03eb6e826dc540c2cfaa85cd4b1330496e695b3a4ddbc93b6af7d13ffc0ec5ed.css integrity="sha256-A+tugm3FQMLPqoXNSxMwSW5pWzpN28k7avfRP/wOxe0=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.xen0n.name/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.xen0n.name/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.xen0n.name/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.xen0n.name/apple-touch-icon.png><link rel=mask-icon href=https://blog.xen0n.name/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cmn-hans-cn href=https://blog.xen0n.name/posts/old/meizu-mx4-cm/faq/><link rel=alternate hreflang=en href=https://blog.xen0n.name/en/posts/old/meizu-mx4-cm/faq/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="CyanogenMod for Meizu MX4: FAQ #1"><meta property="og:description" content="Status on bootloader lock circumvention As you&rsquo;ve already known, ordinary version of Meizu MX4 has its bootloader locked, thus only stock Flyme images are allowed to boot. Due to the implementation of MTK secure restricted boot, the device will be hard-bricked if the RSA signature verification failed. You can&rsquo;t even recharge the battery as the verification code runs very early, even earlier than initialization of peripherals. Flashing using SP Flash Tool wouldn&rsquo;t work either because the Boot ROM (BROM) is locked on the hardware level."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.xen0n.name/en/posts/old/meizu-mx4-cm/faq/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-09-14T16:35:00+08:00"><meta property="article:modified_time" content="2015-09-14T16:35:00+08:00"><meta property="og:site_name" content="write(2)"><meta name=twitter:card content="summary"><meta name=twitter:title content="CyanogenMod for Meizu MX4: FAQ #1"><meta name=twitter:description content="Status on bootloader lock circumvention As you&rsquo;ve already known, ordinary version of Meizu MX4 has its bootloader locked, thus only stock Flyme images are allowed to boot. Due to the implementation of MTK secure restricted boot, the device will be hard-bricked if the RSA signature verification failed. You can&rsquo;t even recharge the battery as the verification code runs very early, even earlier than initialization of peripherals. Flashing using SP Flash Tool wouldn&rsquo;t work either because the Boot ROM (BROM) is locked on the hardware level."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.xen0n.name/en/posts/"},{"@type":"ListItem","position":2,"name":"CyanogenMod for Meizu MX4: FAQ #1","item":"https://blog.xen0n.name/en/posts/old/meizu-mx4-cm/faq/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"CyanogenMod for Meizu MX4: FAQ #1","name":"CyanogenMod for Meizu MX4: FAQ #1","description":"Status on bootloader lock circumvention As you\u0026rsquo;ve already known, ordinary version of Meizu MX4 has its bootloader locked, thus only stock Flyme images are allowed to boot. Due to the implementation of MTK secure restricted boot, the device will be hard-bricked if the RSA signature verification failed. You can\u0026rsquo;t even recharge the battery as the verification code runs very early, even earlier than initialization of peripherals. Flashing using SP Flash Tool wouldn\u0026rsquo;t work either because the Boot ROM (BROM) is locked on the hardware level.","keywords":[],"articleBody":"Status on bootloader lock circumvention As you’ve already known, ordinary version of Meizu MX4 has its bootloader locked, thus only stock Flyme images are allowed to boot. Due to the implementation of MTK secure restricted boot, the device will be hard-bricked if the RSA signature verification failed. You can’t even recharge the battery as the verification code runs very early, even earlier than initialization of peripherals. Flashing using SP Flash Tool wouldn’t work either because the Boot ROM (BROM) is locked on the hardware level.\nNevertheless, 3rd-party Android distros can (and will) be ported to Meizu MX4. Thanks to Meizu, the Flyme boot sequence is not very different from that of AOSP, and that means we can mix-and-match stock boot and 3rd-party system partitions (albeit with loss of features requiring e.g. init script modification). Another thought might be porting kexec to stock kernel, booting a second identical kernel but with our own initramfs. We can only use an identical kernel as the source is unavailable, but fortunately they haven’t disabled the module support, which is nice.\nProgress so far:\nNon-working: DO NOT TRY directly flashing the following partitions using images extracted from Meizu MX4 Ubuntu Edition.\npreloader (/dev/block/mmcblk0boot0) lk seccfg secro flashinfo This way, although theoretically sound (as it seems to replace all code involved in boot process), still hard-bricks the phone, probably caused by the BROM which is unaccessible from Linux. The only way to access the BROM seems to be specialized debugging equipments, but doing so has legal risks. I bricked two phones provided by volunteers recruited from Weibo, so just don’t try this.\nWorking: modifying base system to get it to boot on MTK/Flyme boot.img\nThis is mainly about noticing the differences between AOSP and MTK boot.img components (init, init scripts, healthd), and working around the differences in base system, which we can freely modify. However, because the boot.img is left untouched, some features may be harder to implement, specifically those relying on init services. CM superuser management is one magnificent example of this; all volunteers who flashed the 1st testing system image lost their root access despite my explicit starting the su daemon via an executable run as root but non-existent on CM. Also the requirement of modified base system is not really elegant, so I’m currently experimenting with the 3rd method –\nUnknown: kexec-ing with replaced initramfs\nI’ve found an implementation on XDA, but that one seems to be based on an CAF 3.4 kernel, which is plain unusable on a MTK 3.10 kernel. After an extensive coding session the code finally compiles and loads, but the kernel instantly panics after that. In the following days I’ll try to do the work from scratch with the open-sourced MX4 Ubuntu Edition kernel, to see if this is indeed feasible.\nPossibility of Ubuntu Touch on ordinary MX4 The lk implementation of MX4 Ubuntu Edition passes a few more parameters on kernel command-line compared to that of orinary MX4. You might think the parameters are just decorations and can be safely thrown away, but the parameters look like this:\nsystempart=/dev/disk/by-partlabel/system datapart=/dev/disk/by-partlabel/userdata fixrtc Ermmmm…\nOn top of the lk differences, Ubuntu Touch also facilitates its own kernel image and boot sequence, effectively requiring an unlocked bootloader to successfully boot.\nAnyway, if the kexec way of circumventing the bootloader succeeded, Ubuntu Touch can then be installed on ordinary MX4. Otherwise it seems pretty difficult…\nCompatibility with YunOS edition MX4’s The hardware is (nearly) identical, so there isn’t even a problem in the first place. However there are reports of bricked phones after cross-flashing between YunOS (Y) and general (A) versions of Flyme OS, so I wouldn’t be 100% sure about the compatibility. Will look into this later.\n","wordCount":"617","inLanguage":"en","datePublished":"2015-09-14T16:35:00+08:00","dateModified":"2015-09-14T16:35:00+08:00","author":[{"@type":"Person","name":"WÁNG \"xen0n\" Xuěruì"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.xen0n.name/en/posts/old/meizu-mx4-cm/faq/"},"publisher":{"@type":"Organization","name":"write(2)","logo":{"@type":"ImageObject","url":"https://blog.xen0n.name/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.xen0n.name/en/ accesskey=h title="write(2) (Alt + H)">write(2)</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://blog.xen0n.name/ title=简体中文（大陆普通话） aria-label=:cn:>🇨🇳</a></li></ul></div></div><ul id=menu><li><a href=https://blog.xen0n.name/en/archives title=Archive><span>Archive</span></a></li><li><a href=https://blog.xen0n.name/en/categories title=Categories><span>Categories</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.xen0n.name/en/>Home</a>&nbsp;»&nbsp;<a href=https://blog.xen0n.name/en/posts/>Posts</a></div><h1 class=post-title>CyanogenMod for Meizu MX4: FAQ #1</h1><div class=post-meta><span title='2015-09-14 16:35:00 +0800 +0800'>September 14, 2015</span>&nbsp;·&nbsp;3 min read&nbsp;·&nbsp;WÁNG "xen0n" Xuěruì&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://blog.xen0n.name/posts/old/meizu-mx4-cm/faq/>🇨🇳</a></li></ul></div></header><div class=post-content><h2 id=status-on-bootloader-lock-circumvention>Status on bootloader lock circumvention<a hidden class=anchor aria-hidden=true href=#status-on-bootloader-lock-circumvention>#</a></h2><p>As you&rsquo;ve already known, ordinary version of Meizu MX4 has its bootloader
locked, thus only stock Flyme images are allowed to boot. Due to the
implementation of MTK <s>secure</s> restricted boot, the device will be
hard-bricked if the RSA signature verification failed. You can&rsquo;t even
recharge the battery as the verification code runs very early, even earlier
than initialization of peripherals. Flashing using SP Flash Tool wouldn&rsquo;t
work either because the Boot ROM (BROM) is locked on the hardware level.</p><p>Nevertheless, 3rd-party Android distros can (and will) be ported to Meizu MX4.
Thanks to Meizu, the Flyme boot sequence is not very different from that of
AOSP, and that means we can mix-and-match stock <code>boot</code> and 3rd-party <code>system</code>
partitions (albeit with loss of features requiring e.g. init script
modification). Another thought might be porting <code>kexec</code> to stock kernel,
booting a second identical kernel but with our own initramfs. We can only use
an identical kernel as the source is unavailable, but fortunately they haven&rsquo;t
disabled the module support, which is nice.</p><p>Progress so far:</p><ul><li><p>Non-working: <strong>DO NOT TRY</strong> directly flashing the following partitions
using images extracted from Meizu MX4 Ubuntu Edition.</p><ul><li><code>preloader</code> (<code>/dev/block/mmcblk0boot0</code>)</li><li><code>lk</code></li><li><code>seccfg</code></li><li><code>secro</code></li><li><code>flashinfo</code></li></ul><p>This way, although theoretically sound (as it <em>seems</em> to replace all code
involved in boot process), still hard-bricks the phone, probably caused by
the BROM which is unaccessible from Linux. The only way to access
the BROM seems to be specialized debugging equipments, but doing so has
legal risks. I bricked two phones provided by volunteers recruited from
Weibo, so just don&rsquo;t try this.</p></li><li><p>Working: modifying base system to get it to boot on MTK/Flyme <code>boot.img</code></p><p>This is mainly about noticing the differences between AOSP and MTK
<code>boot.img</code> components (<code>init</code>, init scripts, <code>healthd</code>), and working
around the differences in base system, which we can freely modify.
However, because the <code>boot.img</code> is left untouched, some features may be
harder to implement, specifically those relying on <code>init</code> services.
CM superuser management is one magnificent example of this; all volunteers
who flashed the 1st testing system image lost their root access despite
my explicit starting the <code>su</code> daemon via an executable run as <code>root</code> but
non-existent on CM. Also the requirement of modified base system is not
really elegant, so I&rsquo;m currently experimenting with the 3rd method &ndash;</p></li><li><p>Unknown: <code>kexec</code>-ing with replaced initramfs</p><p>I&rsquo;ve found <a href="http://forum.xda-developers.com/showthread.php?t=2495152">an implementation on XDA</a>, but that one seems to be
based on an CAF 3.4 kernel, which is plain unusable on a MTK 3.10 kernel.
After an extensive coding session the code finally compiles and loads,
but the kernel instantly panics after that. In the following days I&rsquo;ll
try to do the work from scratch with the open-sourced MX4 Ubuntu Edition
kernel, to see if this is indeed feasible.</p></li></ul><h2 id=possibility-of-ubuntu-touch-on-ordinary-mx4>Possibility of Ubuntu Touch on ordinary MX4<a hidden class=anchor aria-hidden=true href=#possibility-of-ubuntu-touch-on-ordinary-mx4>#</a></h2><p>The <code>lk</code> implementation of MX4 Ubuntu Edition passes a few more parameters
on kernel command-line compared to that of orinary MX4. You might think the
parameters are just decorations and can be safely thrown away, but the
parameters look like this:</p><pre tabindex=0><code>systempart=/dev/disk/by-partlabel/system datapart=/dev/disk/by-partlabel/userdata fixrtc
</code></pre><p>Ermmmm&mldr;</p><p>On top of the <code>lk</code> differences, Ubuntu Touch also facilitates its own kernel
image and boot sequence, effectively requiring an unlocked bootloader to
successfully boot.</p><p>Anyway, if the <code>kexec</code> way of circumventing the bootloader succeeded, Ubuntu
Touch can then be installed on ordinary MX4. Otherwise it seems pretty difficult&mldr;</p><h2 id=compatibility-with-yunos-edition-mx4s>Compatibility with YunOS edition MX4&rsquo;s<a hidden class=anchor aria-hidden=true href=#compatibility-with-yunos-edition-mx4s>#</a></h2><p>The hardware is (nearly) identical, so there isn&rsquo;t even a problem in the first
place. However there are reports of bricked phones after cross-flashing
between YunOS (Y) and general (A) versions of Flyme OS, so I wouldn&rsquo;t be 100%
sure about the compatibility. Will look into this later.</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://blog.xen0n.name/en/posts/old/meizu-mx4-cm/cm-12.1-userdebug-3/><span class=title>« Prev Page</span><br><span>CyanogenMod for Meizu MX4: CM12.1 20151005 testing release</span></a></nav></footer><script src=https://utteranc.es/client.js repo=xen0n/xen0n.github.io issue-term=pathname label=comment theme=preferred-color-scheme crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2013-2023 WANG Xuerui; licensed with <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en>cc-by-nc-sa 4.0</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span>
<span><a href=https://beian.miit.gov.cn target=_blank>苏ICP备17027553号-1</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>